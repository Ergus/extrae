\chapter{Instrumented routines}\label{cha:InstrumentedRoutines}

\section{Instrumented MPI routines}\label{sec:MPIinstrumentedroutines}

These are the instrumented MPI routines in the \TRACE package:

\begin{itemize}
\item MPI\_Init
\item MPI\_Init\_thread\footnotemark[1]
\item MPI\_Finalize
\item MPI\_Bsend
\item MPI\_Ssend
\item MPI\_Rsend
\item MPI\_Send
\item MPI\_Bsend\_init
\item MPI\_Ssend\_init
\item MPI\_Rsend\_init
\item MPI\_Send\_init
\item MPI\_Ibsend
\item MPI\_Issend
\item MPI\_Irsend
\item MPI\_Isend
\item MPI\_Recv
\item MPI\_Irecv
\item MPI\_Recv\_init
\item MPI\_Reduce
\item MPI\_Reduce\_scatter
\item MPI\_Allreduce
\item MPI\_Barrier
\item MPI\_Cancel
\item MPI\_Test
\item MPI\_Wait
\item MPI\_Waitall
\item MPI\_Waitany
\item MPI\_Waitsome
\item MPI\_Bcast
\item MPI\_Alltoall
\item MPI\_Alltoallv
\item MPI\_Allgather
\item MPI\_Allgatherv
\item MPI\_Gather
\item MPI\_Gatherv
\item MPI\_Scatter
\item MPI\_Scatterv
\item MPI\_Comm\_rank
\item MPI\_Comm\_size
\item MPI\_Comm\_create
\item MPI\_Comm\_dup
\item MPI\_Comm\_split
\item MPI\_Cart\_create
\item MPI\_Cart\_sub
\item MPI\_Start
\item MPI\_Startall
\item MPI\_Request\_free
\item MPI\_Scan
\item MPI\_Sendrecv
\item MPI\_Sendrecv\_replace
\item MPI\_File\_open\footnotemark[2]
\item MPI\_File\_close\footnotemark[2]
\item MPI\_File\_read\footnotemark[2]
\item MPI\_File\_read\_all\footnotemark[2]
\item MPI\_File\_write\footnotemark[2]
\item MPI\_File\_write\_all\footnotemark[2]
\item MPI\_File\_read\_at\footnotemark[2]
\item MPI\_File\_read\_at\_all\footnotemark[2]
\item MPI\_File\_write\_at\footnotemark[2]
\item MPI\_File\_write\_at\_all\footnotemark[2]
\end{itemize}

\footnotetext[1]{The MPI library must support this routine}
\footnotetext[2]{The MPI library must support these MPI/IO routines}

\section{Instrumented OpenMP runtimes}\label{sec:OpenMPruntimesinstrumented}

\subsection{Intel compilers - icc, iCC, ifort}

The instrumentation of this OpenMP runtime is only available using the \TRACE pacakge based on DynInst library.

\TRACE supports Intel OpenMP runtime 8.1, 9.1, 10.1 and 11.0.

These are the instrument routines of the Intel OpenMP runtimes:

\begin{itemize}
\item \_\_kmpc\_fork\_call
\item \_\_kmpc\_barrier
\item \_\_kmpc\_invoke\_task\_func
\item \_\_kmpc\_set\_lock\footnotemark[3]
\item \_\_kmpc\_unset\_lock\footnotemark[3]
\end{itemize}

\footnotetext[3]{The instrumentation of OpenMP locks can be enabled/disabled}

\subsection{IBM compilers - xlc, xlC, xlf}

\TRACE supports IBM OpenMP runtime 1.6.

These are the instrumented routines of the IBM OpenMP runtime:

\begin{itemize}
\item \_xlsmpParallelDoSetup\_TPO
\item \_xlsmpParRegionSetup\_TPO
\item \_xlsmpWSDoSetup\_TPO
\item \_xlsmpBarrier\_TPO
\item \_xlsmpSingleSetup\_TPO
\item \_xlsmpWSSectSetup\_TPO
\item \_xlsmpRelDefaultSLock\footnotemark[3]
\item \_xlsmpGetDefaultSLock\footnotemark[3]
\end{itemize}

\subsection{GNU compilers - gcc, g++, gfortran}

\TRACE supports GNU OpenMP runtime 4.2.

These are the instrumented routines of the IBM OpenMP runtime:

\begin{itemize}
\item GOMP\_parallel\_start
\item GOMP\_parallel\_sections\_start
\item GOMP\_parallel\_end
\item GOMP\_sections\_start
\item GOMP\_sections\_next
\item GOMP\_sections\_end
\item GOMP\_sections\_end\_nowait
\item GOMP\_loop\_end
\item GOMP\_loop\_end\_nowait
\item GOMP\_loop\_static\_start
\item GOMP\_loop\_dynamic\_start
\item GOMP\_loop\_guided\_start
\item GOMP\_loop\_runtime\_start
\item GOMP\_parallel\_loop\_static\_start
\item GOMP\_parallel\_loop\_dynamic\_start
\item GOMP\_parallel\_loop\_guided\_start
\item GOMP\_parallel\_loop\_runtime\_start
\item GOMP\_loop\_static\_next
\item GOMP\_loop\_dynamic\_next
\item GOMP\_loop\_guided\_next
\item GOMP\_loop\_runtime\_next
\item GOMP\_barrier
\item GOMP\_critical\_name\_enter\footnotemark[3]
\item GOMP\_critical\_name\_exit\footnotemark[3]
\item GOMP\_critical\_enter\footnotemark[3]
\item GOMP\_critical\_exit\footnotemark[3]
\item GOMP\_atomic\_enter\footnotemark[3]
\item GOMP\_atomic\_exit\footnotemark[3]
\end{itemize}

\section{Instrumented pthread runtimes}\label{sec:OpenMPruntimesinstrumented}

These are the instrumented routines of the pthread runtime:

\begin{itemize}
\item pthread\_create
\item pthread\_detach
\item pthread\_join
\item pthread\_mutex\_lock
\item pthread\_mutex\_trylock
\item pthread\_mutex\_timedlock
\item pthread\_mutex\_unlock
% pthread_cond_* routines seem to be not instrumentable. the application hangs when instrumenting them
%\item pthread\_cond\_signal
%\item pthread\_cond\_broadcast
%\item pthread\_cond\_wait
%\item pthread\_cond\_timedwait
\item pthread\_rwlock\_rdlock
\item pthread\_rwlock\_tryrdlock
\item pthread\_rwlock\_timedrdlock
\item pthread\_rwlock\_wrlock
\item pthread\_rwlock\_trywrlock
\item pthread\_rwlock\_timedwrlock
\item pthread\_rwlock\_unlock
\end{itemize}
